<?php

$json = '{
    "data": {
        "id": "10.20363/bzb-2019.68.2.183",
        "type": "dois",
        "attributes": {
            "doi": "10.20363/bzb-2019.68.2.183",
            "prefix": "10.20363",
            "suffix": "bzb-2019.68.2.183",
            "identifiers": [],
            "alternateIdentifiers": [],
            "creators": [
                {
                    "name": "Breitling, Rainer",
                    "nameType": "Personal",
                    "givenName": "Rainer",
                    "familyName": "Breitling",
                    "affiliation": [],
                    "nameIdentifiers": [
                        {
                            "schemeUri": "https://orcid.org",
                            "nameIdentifierScheme": "ORCID"
                        }
                    ]
                }
            ],
            "titles": [
                {
                    "title": "Euophrys petrensis C. L. Koch, 1837, is a genuine member of the genus Talavera (Araneae: Salticidae)"
                }
            ],
            "publisher": "Zoological Research Museum Alexander Koenig",
            "container": {
                "type": "Series",
                "identifier": "2190–7307",
                "identifierType": "ISSN"
            },
            "publicationYear": 2019,
            "subjects": [
                {
                    "subject": "Araneae"
                },
                {
                    "subject": "DNA barcoding"
                },
                {
                    "subject": "phylogenetic systematics"
                }
            ],
            "contributors": [],
            "dates": [
                {
                    "date": "2019-01-28",
                    "dateType": "Issued"
                }
            ],
            "language": null,
            "types": {
                "ris": "RPRT",
                "bibtex": "article",
                "citeproc": "article-journal",
                "schemaOrg": "ScholarlyArticle",
                "resourceType": "CreativeWork",
                "resourceTypeGeneral": "Text"
            },
            "relatedIdentifiers": [
                {
                    "relationType": "IsPartOf",
                    "relatedIdentifier": "2190–7307",
                    "relatedIdentifierType": "ISSN"
                },
                {
                    "relationType": "IsIdenticalTo",
                    "relatedIdentifier": "urn:lsid:zoobank.org:pub:F0246630-F65F-4FF1-BF4E-008D483BDA2C",
                    "relatedIdentifierType": "URN"
                }
            ],
            "sizes": [],
            "formats": [],
            "version": null,
            "rightsList": [
                {
                    "rights": "Open Access",
                    "rightsUri": "info:eu-repo/semantics/openAccess"
                }
            ],
            "descriptions": [
                {
                    "lang": null,
                    "description": "The small jumping spider Euophrys petrensis C. L. Koch, 1837, combines morphological characters of both Euophrys s. str. and Talavera, and its generic placement has consequently been contentious. After many years of being placed in Talavera, the species has recently been transferred back to Euophrys. Here, public DNA barcoding data are used to confirm that the species should be placed in the genus Talavera, as T. petrensis, stat. rev., as is also indicated by several putative morphological synapomorphies identified earlier.",
                    "descriptionType": "Abstract"
                }
            ],
            "geoLocations": [],
            "fundingReferences": [],
            "xml": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHJlc291cmNlIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhtbG5zPSJodHRwOi8vZGF0YWNpdGUub3JnL3NjaGVtYS9rZXJuZWwtNCIgeHNpOnNjaGVtYUxvY2F0aW9uPSJodHRwOi8vZGF0YWNpdGUub3JnL3NjaGVtYS9rZXJuZWwtNCBodHRwOi8vc2NoZW1hLmRhdGFjaXRlLm9yZy9tZXRhL2tlcm5lbC00L21ldGFkYXRhLnhzZCI+CiAgPGlkZW50aWZpZXIgaWRlbnRpZmllclR5cGU9IkRPSSI+MTAuMjAzNjMvQlpCLTIwMTkuNjguMi4xODM8L2lkZW50aWZpZXI+CiAgPGNyZWF0b3JzPgogICAgPGNyZWF0b3I+CiAgICAgIDxjcmVhdG9yTmFtZSBuYW1lVHlwZT0iUGVyc29uYWwiPkJyZWl0bGluZywgUmFpbmVyPC9jcmVhdG9yTmFtZT4KICAgICAgPGdpdmVuTmFtZT5SYWluZXI8L2dpdmVuTmFtZT4KICAgICAgPGZhbWlseU5hbWU+QnJlaXRsaW5nPC9mYW1pbHlOYW1lPgogICAgICA8bmFtZUlkZW50aWZpZXIgbmFtZUlkZW50aWZpZXJTY2hlbWU9Ik9SQ0lEIiBzY2hlbWVVUkk9Imh0dHBzOi8vb3JjaWQub3JnIi8+CiAgICA8L2NyZWF0b3I+CiAgPC9jcmVhdG9ycz4KICA8dGl0bGVzPgogICAgPHRpdGxlPkV1b3BocnlzIHBldHJlbnNpcyBDLiBMLiBLb2NoLCAxODM3LCBpcyBhIGdlbnVpbmUgbWVtYmVyIG9mIHRoZSBnZW51cyBUYWxhdmVyYSAoQXJhbmVhZTogU2FsdGljaWRhZSk8L3RpdGxlPgogIDwvdGl0bGVzPgogIDxwdWJsaXNoZXI+Wm9vbG9naWNhbCBSZXNlYXJjaCBNdXNldW0gQWxleGFuZGVyIEtvZW5pZzwvcHVibGlzaGVyPgogIDxwdWJsaWNhdGlvblllYXI+MjAxOTwvcHVibGljYXRpb25ZZWFyPgogIDxyZXNvdXJjZVR5cGUgcmVzb3VyY2VUeXBlR2VuZXJhbD0iVGV4dCI+Q3JlYXRpdmVXb3JrPC9yZXNvdXJjZVR5cGU+CiAgPHN1YmplY3RzPgogICAgPHN1YmplY3Q+QXJhbmVhZTwvc3ViamVjdD4KICAgIDxzdWJqZWN0PkROQSBiYXJjb2Rpbmc8L3N1YmplY3Q+CiAgICA8c3ViamVjdD5waHlsb2dlbmV0aWMgc3lzdGVtYXRpY3M8L3N1YmplY3Q+CiAgPC9zdWJqZWN0cz4KICA8ZGF0ZXM+CiAgICA8ZGF0ZSBkYXRlVHlwZT0iSXNzdWVkIj4yMDE5LTAxLTI4PC9kYXRlPgogIDwvZGF0ZXM+CiAgPHJlbGF0ZWRJZGVudGlmaWVycz4KICAgIDxyZWxhdGVkSWRlbnRpZmllciByZWxhdGVkSWRlbnRpZmllclR5cGU9IklTU04iIHJlbGF0aW9uVHlwZT0iSXNQYXJ0T2YiPjIxOTDigJM3MzA3PC9yZWxhdGVkSWRlbnRpZmllcj4KICAgIDxyZWxhdGVkSWRlbnRpZmllciByZWxhdGVkSWRlbnRpZmllclR5cGU9IlVSTiIgcmVsYXRpb25UeXBlPSJJc0lkZW50aWNhbFRvIj51cm46bHNpZDp6b29iYW5rLm9yZzpwdWI6RjAyNDY2MzAtRjY1Ri00RkYxLUJGNEUtMDA4RDQ4M0JEQTJDPC9yZWxhdGVkSWRlbnRpZmllcj4KICA8L3JlbGF0ZWRJZGVudGlmaWVycz4KICA8dmVyc2lvbi8+CiAgPHJpZ2h0c0xpc3Q+CiAgICA8cmlnaHRzIHJpZ2h0c1VSST0iaW5mbzpldS1yZXBvL3NlbWFudGljcy9vcGVuQWNjZXNzIj5PcGVuIEFjY2VzczwvcmlnaHRzPgogIDwvcmlnaHRzTGlzdD4KICA8ZGVzY3JpcHRpb25zPgogICAgPGRlc2NyaXB0aW9uIGRlc2NyaXB0aW9uVHlwZT0iQWJzdHJhY3QiPlRoZSBzbWFsbCBqdW1waW5nIHNwaWRlciBFdW9waHJ5cyBwZXRyZW5zaXMgQy4gTC4gS29jaCwgMTgzNywgY29tYmluZXMgbW9ycGhvbG9naWNhbCBjaGFyYWN0ZXJzIG9mIGJvdGggRXVvcGhyeXMgcy4gc3RyLiBhbmQgVGFsYXZlcmEsIGFuZCBpdHMgZ2VuZXJpYyBwbGFjZW1lbnQgaGFzIGNvbnNlcXVlbnRseSBiZWVuIGNvbnRlbnRpb3VzLiBBZnRlciBtYW55IHllYXJzIG9mIGJlaW5nIHBsYWNlZCBpbiBUYWxhdmVyYSwgdGhlIHNwZWNpZXMgaGFzIHJlY2VudGx5IGJlZW4gdHJhbnNmZXJyZWQgYmFjayB0byBFdW9waHJ5cy4gSGVyZSwgcHVibGljIEROQSBiYXJjb2RpbmcgZGF0YSBhcmUgdXNlZCB0byBjb25maXJtIHRoYXQgdGhlIHNwZWNpZXMgc2hvdWxkIGJlIHBsYWNlZCBpbiB0aGUgZ2VudXMgVGFsYXZlcmEsIGFzIFQuIHBldHJlbnNpcywgc3RhdC4gcmV2LiwgYXMgaXMgYWxzbyBpbmRpY2F0ZWQgYnkgc2V2ZXJhbCBwdXRhdGl2ZSBtb3JwaG9sb2dpY2FsIHN5bmFwb21vcnBoaWVzIGlkZW50aWZpZWQgZWFybGllci48L2Rlc2NyaXB0aW9uPgogIDwvZGVzY3JpcHRpb25zPgo8L3Jlc291cmNlPgo=",
            "url": "http://zoologicalbulletin.de/BzB_Volumes/Volume_68_2/183_breitling_20190902.pdf",
            "contentUrl": null,
            "metadataVersion": 2,
            "schemaVersion": null,
            "source": "fabrica",
            "isActive": true,
            "state": "findable",
            "reason": null,
            "viewCount": 0,
            "viewsOverTime": [],
            "downloadCount": 0,
            "downloadsOverTime": [],
            "referenceCount": 0,
            "citationCount": 0,
            "citationsOverTime": [],
            "partCount": 0,
            "partOfCount": 0,
            "versionCount": 0,
            "versionOfCount": 0,
            "created": "2019-09-05T08:16:06.000Z",
            "registered": "2019-09-05T08:16:41.000Z",
            "published": "2019",
            "updated": "2020-07-29T23:59:38.000Z"
        },
        "relationships": {
            "client": {
                "data": {
                    "id": "zbmed.zfmk",
                    "type": "clients"
                }
            },
            "provider": {
                "data": {
                    "id": "wfnq",
                    "type": "providers"
                }
            },
            "media": {
                "data": {
                    "id": "10.20363/bzb-2019.68.2.183",
                    "type": "media"
                }
            },
            "references": {
                "data": []
            },
            "citations": {
                "data": []
            },
            "parts": {
                "data": []
            },
            "partOf": {
                "data": []
            },
            "versions": {
                "data": []
            },
            "versionOf": {
                "data": []
            }
        }
    }
}';

$obj = json_decode($json);

print_r($obj);

$csl = new stdclass;

$data = $obj->data;

foreach ($data->attributes as $k => $v)
{
	switch ($k)
	{
		case 'doi':
			$csl->DOI = $v;
			break;

		case 'titles':
			$csl->title = $v[0]->title;
			break;


		default:
			break;
	}
}

print_r($csl);



?>
