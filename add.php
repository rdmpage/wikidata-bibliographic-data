<?php

// Add records to Wikidata based on file listing the microcitation GUIDs

require_once (dirname(__FILE__) . '/wikidata.php');

$filename = '1174-9202.tsv';

$filename = 'quickstatements/0067-0464.tsv';

$filename = 'quickstatements/1005-9628.tsv';

$filename = 'quickstatements/0001-804X.tsv';

$filename = 'quickstatements/brittonia.tsv';

$filename = 'quickstatements/extra.tsv';

$filename = 'quickstatements/0035-9181.txt';

$filename = 'quickstatements/0372-1361.txt';

// Records of the Indian Museum
$filename = 'quickstatements/0375-099X.txt';

// Transactions And Proceedings of The Royal Society of New Zealand
$filename = 'quickstatements/1176-6166.txt';

// Basteria
$filename = 'quickstatements/0005-6219.txt';

// Test cases
//$filename = 'quickstatements/test.txt';

// Zoologische Mededelingen
$filename = 'quickstatements/0024-0672.txt';

// Pacific Insects
$filename = 'quickstatements/0030-8714.txt';

// Odonatologica
$filename = 'quickstatements/0375-0183.txt';

// Bulletin of the Osaka Museum of Natural History
$filename = 'quickstatements/0078-6675.txt';

// Journal of Arachnology
$filename = 'quickstatements/0161-8202.txt';

// Bulletin of The British Arachnological Society
$filename = 'quickstatements/0524-4994.txt';

// Studies on the Fauna of Suriname and other Guyanas
$filename = 'quickstatements/0300-5488.txt';

// Proceedings of the California Academy of Sciences
$filename = 'quickstatements/0068-547X.txt';

// 札幌博物学会会報 Sapporo
$filename = 'quickstatements/札幌博物学会会報.txt';

// Proceedings of the California Academy of Sciences suppliements with comma in file name
$filename = 'quickstatements/0068-547X-supplements.txt';

// Journal of The Malayan Branch of The Royal Asiatic Society
$filename = 'quickstatements/2304-7550.txt';
$filename = 'quickstatements/2304-7550-extra.txt';

// Beaufortia
$filename = 'quickstatements/0067-4745.txt';

// Bijdragen Tot de Dierkunde
$filename = 'quickstatements/0067-8546.txt';

// Cahiers de Biologie Marine (DataCite DOI)
$filename = 'quickstatements/0007-9723.txt';

// Proceedings of the Malacological Society of London
$filename = 'quickstatements/0025-1194.txt';

// Braueria
$filename = 'quickstatements/1026-3632.txt';

// Molluscan Research CSIRO
$filename = 'quickstatements/1323-5818-2002-2004.txt';
$filename = 'quickstatements/1323-5818-2005-2013.txt';

// Selbyana
$filename = 'quickstatements/0361-185X.txt';

// Sida
$filename = 'quickstatements/0036-1488.txt';
$filename = 'quickstatements/long.txt';

// Tettigonia
$filename = 'quickstatements/1341-6707.txt';

// Melbourne
$filename = 'quickstatements/0311-9548.txt';
$filename = 'quickstatements/0083-5986.txt';
$filename = 'quickstatements/0814-1827.txt';
$filename = 'quickstatements/1447-2546.txt';

// Kirkia
$filename = 'quickstatements/0451-9930.txt';

// Acta Botánica Venezuélica
$filename = 'quickstatements/0084-5906.txt';


// Allertonia
$filename = 'quickstatements/0735-8032.txt';

// Annales Botanici Fennici 
$filename = 'quickstatements/0003-3847.txt';

// Moquito Systematics
$filename = 'quickstatements/0091-3669.txt';

// Entomotaxonomia
$filename = 'quickstatements/1000-7482.txt';

// Lindbergia
$filename = 'quickstatements/0105-0761.txt';

// Records of the Australian Museum
$filename = 'quickstatements/0067-1975.txt';

// Journal D'agriculture Traditionnelle Et de Botanique Appliquée
$filename = 'quickstatements/0021-7662.txt';

// Systematics And Geography of Plants
$filename = 'quickstatements/1374-7886.txt';

// Elytra
$filename = 'quickstatements/0387-5733.txt';

// Austrobaileya
$filename = 'quickstatements/0155-4131.txt';

// Cybium
$filename = 'quickstatements/0399-0974.txt';

// Rodriguésia JSTOR
$filename = 'quickstatements/0370-6583.txt';

// Cybium
$filename = 'quickstatements/0399-0974-extra.txt';

// Miscellanea Zoologica Hungarica
$filename = 'quickstatements/0230-9017.txt';

// Journal of The Adelaide Botanic Garden
$filename = 'quickstatements/0313-4083.txt';
// $filename = 'quickstatements/0313-4083-extra.txt';

// Revista Ibérica Aracnología
$filename = 'quickstatements/1576-9518.txt';

// Zoologische Verhandelingen
$filename = 'quickstatements/0024-1652.txt';


// Taiwania
$filename = 'quickstatements/0372-333X.txt';

// Journal of The American Mosquito Control Association
$filename = 'quickstatements/8756-971X.txt';

// Bulletin of The National Museum of Nature And Science Series A (Zoology)
$filename = 'quickstatements/0385-2423.txt';

// Senckenbergiana biologica
$filename = 'quickstatements/0037-2102.txt';

// Acta Chiropterologica
$filename = 'quickstatements/1508-1109.txt';

// Zoosystema no DOI
$filename = 'quickstatements/1280-9551.txt';

// Journal of The Kansas Entomological Society
$filename = 'quickstatements/0022-8567.txt';

// Kew Bulletin no DOI
$filename = 'quickstatements/0075-5974-jstor.txt';

// AMNH handles
$filename = 'quickstatements/0003-0090.txt';

// Madroño	
$filename = 'quickstatements/0024-9637.txt';

// The Raffles Bulletin of Zoology
$filename = 'quickstatements/0217-2445.txt';

// Reinwardtia
$filename = 'quickstatements/0034-365X.txt';

// Coleopterists Bulletin
$filename = 'quickstatements/0010-065X.txt';

// Contributions From The Gray Herbarium of Harvard University
$filename = 'quickstatements/0195-6094.txt';

// Contributions From The Queensland Herbarium
$filename = 'quickstatements/2202-0802.txt';

// Bulletin De La Société Royale De Botanique De Belgique
$filename = 'quickstatements/0037-9557.txt';

// Nachrichtsblatt Der Deutschen Malakozoologischen Gesellschaft
$filename = 'quickstatements/0723-4244.txt';

// Notes From The Leyden Museum
$filename = 'quickstatements/1872-9231.txt';

// Annals of The Natal Museum
$filename = 'quickstatements/0304-0798.txt';

// African Invertebrates
$filename = 'quickstatements/1681-5556.txt';

// Herpetologica
$filename = 'quickstatements/0018-0831.txt';

// Caldasia (JSTOR)
$filename = 'quickstatements/0366-5232.txt';

// Contributions From The United States National Herbarium
$filename = 'quickstatements/0097-1618.txt';

// Folia Malaysiana
$filename = 'quickstatements/1511-8916.txt';

// Harvard Papers In Botany (JSTOR)
$filename = 'quickstatements/1043-4534.txt';

// Revista Del Jardín Botánico Nacional
$filename = 'quickstatements/0253-5696.txt';

// Systematic Botany (JSTOR)
$filename = 'quickstatements/0363-6445.txt';

// CAAR
$filename = 'quickstatements/2325-4882.txt';

$filename = 'quickstatements/herp44.4.txt';

// Tropical Zoology
$filename = 'quickstatements/1970-9528.txt';

$filename = 'quickstatements/0365-7000.txt';

// Salamandra
$filename = 'quickstatements/0036-3375.txt';

// Denisia
$filename = 'quickstatements/1608-8700.txt';

// Insects of Micronesia
$filename = 'quickstatements/0073-8115.txt';

// Blumea
$filename = 'quickstatements/0006-5196.txt';

// Journal of The Washington Academy of Sciences
$filename = 'quickstatements/0043-0439.txt';

// The Bulletin of The Raffles Museum
$filename = 'quickstatements/bullraffles.txt';

// Bull. Bot. Res., Harbin
$filename = 'quickstatements/1673-5102.txt';

// Anales del Instituto Botánico A. J. Cavanilles
$filename = 'quickstatements/0365-0790.txt';

// Anales del Jardín Botánico de Madrid (no DOI)
$filename = 'quickstatements/0211-1322.txt';

// Bulletin de L'institut Royal Des Sciences Naturelles de Belgique Biologie
$filename = 'quickstatements/0374-6429.txt';

// Bulletin de L'institut Royal Des Sciences Naturelles de Belgique
$filename = 'quickstatements/0368-0177.txt';

// Abhandlungen Aus Dem Gebiete Der Naturwissenschaften Hamburg
$filename = 'quickstatements/abhamburg.txt';

// Nachrichten Des Entomologischen Vereins Apollo
$filename = 'quickstatements/0723-9912.txt';

$filename = 'quickstatements/0885-5943.txt';

// Insects of Hawaii
$filename = 'quickstatements/hawaii.txt';

// Acta Arachnologica
$filename = 'quickstatements/0001-5202.txt';

// American Museum Novitates
$filename = 'quickstatements/0003-0082.txt';

// LSU
$filename = 'quickstatements/lsu.txt';


$filename = 'quickstatements/2373-0951.txt';

$filename = 'quickstatements/2095-0357.txt';

$filename = 'quickstatements/2333-2468.txt';

$filename = 'quickstatements/0030-4158.txt';

$filename = 'quickstatements/0038-4909.txt';

// Faune de Madagascar sudoc
$filename = 'quickstatements/0428-0709.txt';

$filename = 'quickstatements/1934-5259.txt';

// Beiträge zur Entomologie
$filename = 'quickstatements/0005-805X.txt';

// Esakia
$filename = 'quickstatements/0071-1268.txt';

// Eos
$filename = 'quickstatements/0013-9440.txt';

// Journal of The Straits Branch of The Royal Asiatic Society
$filename = 'quickstatements/2304-7534.txt';

// Journal of The Helminthological Society of Washington
$filename = 'quickstatements/1049-233X.txt';

// extras
$filename = 'urls.txt';

// Proceedings of The Helminthological Society of Washington
$filename = 'quickstatements/0018-0130.txt';

// annals of tropical medicine & parasitology
$filename = 'quickstatements/0003-4983.txt';

// Bulletin of The Zoological Survey of India
$filename = 'quickstatements/0255-9587.txt';

// Entomon
$filename = 'quickstatements/0377-9335.txt';

// Annals And Magazine of Natural History
$filename = 'quickstatements/0374-5481.txt';

// Botanical Bulletin of Academia Sinica
$filename = 'quickstatements/0006-8063.txt';

// Journal of Japanese botany (test)
$filename = 'quickstatements/0022-2062.txt';

// Kataloge Der Wissenschaftlichen Sammlungen Des Naturhistorischen Museums In Wien
$filename = 'quickstatements/1018-6085.txt';

// Anais da Escola Superior de Agricultura Luiz de Queiroz
$filename = 'quickstatements/0071-1276.txt';

// The Australian Entomologist
$filename = 'quickstatements/1320-6133.txt';

// Journal of The Ocean Science Foundation
$filename = 'quickstatements/1937-7835.txt';

// Вопросы Ихтиологии
$filename = 'quickstatements/0042-8752.txt';

// pacific science
$filename = 'quickstatements/0030-8870.txt';

// Rhodora
$filename = 'quickstatements/0035-4902.txt';

// Contributions From Herbarium Australiense
$filename = 'quickstatements/0311-4538.txt';

// American Fern Journal (some)
$filename = 'quickstatements/0002-8444.txt';

// Botanical Museum Leaflets, Harvard University
$filename = 'quickstatements/0006-8098.txt';

// Mededelingen Van Het Botanisch Museum En Herbarium Van De Rijksuniversiteit Te Utrecht
$filename = 'quickstatements/2352-5754.txt';

// Mededeelingen van 's Rijks Herbarium, Leiden
$filename = 'quickstatements/1570-3223.txt';

// Botanical Studies (Taipei)
$filename = 'quickstatements/1817-406X.txt';

// Journal of The Arnold Arboretum
$filename = 'quickstatements/0004-2625.txt';

// Proceedings of The Hawaiian Entomological Society
$filename = 'quickstatements/0073-134X.txt';

// Deinsea
$filename = 'quickstatements/0923-9308.txt';

// Contributions From The Biological Laboratory, Kyoto University
$filename = 'quickstatements/0452-9987.txt';

// Annals of The Transvaal Museum
$filename = 'quickstatements/0041-1752.txt';

// missed
$filename = 'quickstatements/missed.txt';


$filename = 'quickstatements/0365-3587.txt';

// Aroideana
$filename = 'quickstatements/0197-4033.txt';

// Recueil Des Travaux Botaniques Néerlandais
$filename = 'quickstatements/0370-7504.txt';

// Nuytsia
$filename = 'quickstatements/0085-4417.txt';

// Entomologische Arbeiten Museum G. Frey
$filename = 'quickstatements/0013-8819.txt';

// Flora Neotropica
$filename = 'quickstatements/0071-5794.txt';

// Annalen Des Naturhistorischen Museums In Wien. Serie B Für Botanik Und Zoologie
$filename = 'quickstatements/0255-0105.txt';


// Annalen Des Naturhistorischen Museums In Wien 1919-1979
$filename = 'quickstatements/0083-6133-1919-1979.txt';
$filename = 'quickstatements/a.txt';

// Thai Forest Bulletin (Botany)
$filename = 'quickstatements/0495-3843.txt';

// Anales de la Universidad de Chile (many DOIs not in CrossRef)
$filename = 'quickstatements/0365-7779.txt';

// IPNI JSTOR
$filename = 'quickstatements/ipni_jstor.txt';

// zoologica baetica
$filename = 'quickstatements/1130-4251.txt';


// Guhia DOI
$filename = 'quickstatements/1000-3142.txt';


// Orquideología
$filename = 'quickstatements/0120-1433.txt';

// Nelumbo - The Bulletin of The Botanical Survey of India
$filename = 'quickstatements/2455-376X.txt';

// Nelumbo missed
$filename = 'quickstatements/scholar.in.txt';

// JOURNAL OF TROPICAL AND SUBTROPICAL BOTANY
$filename = 'quickstatements/1005-3395.txt';

// Journal of Geobotany
$filename = 'quickstatements/0374-8081.txt';

// Annals of the Tsukuba Botanical Garden CiNii
$filename = 'quickstatements/0289-3568.txt';

// Transactions of The American Entomological Society And Proceedings of The Entomological Section of The Academy of Natural Sciences
// JSTOR
$filename = 'quickstatements/1945-516X.txt';

// Smithsonian Herpetological Information Service
$filename = 'quickstatements/2331-7515.txt';

// Occasional papers of the Museum of Zoology, University of Michigan
$filename = 'quickstatements/0076-8413.txt';

// Miscellaneous Publications
$filename = 'quickstatements/0076-8405.txt';

//ACTA ZOOTAXONOMICA SINICA experiments
$filename = 'quickstatements/1000-0739.txt';

// Russioan Journal of Herpetology non-fucntiong DOIs
$filename = 'quickstatements/1026-2296.txt';

// Berichte Der Deutschen Botanischen Gesellschaft
// DOIs don't function
$filename = 'quickstatements/0011-9970.txt';

// Rheeda no DOIs
$filename = 'quickstatements/0971-2313.txt';

// Sichuan journal of zoology
$filename = 'quickstatements/1000-7083.txt';

// CNKI DOI
$filename = 'quickstatements/cnkidoi.txt';

// Notes from the Royal Botanic Garden, Edinburgh
$filename = 'quickstatements/0080-4274.txt';

// Extra Lankerstriana
$filename = 'quickstatements/1409-3871.txt';

// Ceiba with DOIs
$filename = 'quickstatements/2225-6687.txt';

// Ceiba without DOIs
$filename = 'quickstatements/0008-8692.txt';

// Zoologische Mededelingen missed
$filename = 'quickstatements/0024-0672-extra.txt';

// Societas Entomologica
$filename = 'quickstatements/socent.txt';

// Darwiniania
$filename = 'quickstatements/0011-6793.txt';

// AMNH Novitates Handles
$filename = 'quickstatements/0003-0082-handles.txt';

// Sandakania
$filename = 'quickstatements/0128-5939.txt';

// 月刊むし : a monthly journal of entomology
$filename = 'quickstatements/0388-418X.txt';

// Annales Mycologici need to do more, need to filter out Anon, Plates, and other stray bits
$filename = 'quickstatements/0176-3970.txt';

// Mycotaxon cybertruffle
//$filename = 'quickstatements/0093-4666.txt';

// Formosan Entomology
$filename = 'quickstatements/1680-7650.txt';

// Chinese Journal of Entomology
$filename = 'quickstatements/0258-462X.txt';

// Bangladesh Journal of Plant Taxonomy
$filename = 'quickstatements/2224-7297.txt';

// Revista de Biologia Neotropical / Journal of Neotropical Biology
$filename = 'quickstatements/2178-0579.txt';

// Journal of Japanese botany
$filename = 'quickstatements/0022-2062.txt';

// Adansonia
$filename = 'quickstatements/1280-8571.txt';

// Linzer Biologische Beiträge
$filename = 'quickstatements/0253-116X.txt';

$filename = 'quickstatements/0253-6366.txt';

// Bulletin de L'institut Royal Des Sciences Naturelles de Belgique Entomologie & Biol
$filename = 'quickstatements/2033-494X.txt';
$filename = 'quickstatements/0374-6232.txt';

// Genus
$filename = 'quickstatements/0867-1710.txt';

// Uttar Pradesh Journal of Zoology
$filename = 'quickstatements/0256-971X.txt';

$filename = 'quickstatements/0001-7302.txt';

// FishTaxa
$filename = 'quickstatements/2458-942X.txt';

// Iranian Ichthyology
$filename = 'quickstatements/2383-0964.txt';

// Transactions of The American Entomological Society (much to do)
$filename = 'quickstatements/0002-8320.txt';

// Acta Entomologica Musei Nationalis Pragae
$filename = 'quickstatements/0374-1036.txt';

// Földtani Közlöny (to do)
$filename = 'quickstatements/0015-542X.txt';

// Neue Entomologische Nachrichten
$filename = 'quickstatements/0722-3773.txt';

// Acta Botanica Yunnanica 
// Initially Wanfang DOI data vols 
$filename = 'quickstatements/0253-2700.txt';

$filename = 'quickstatements/missed.txt';

// Castanea
//$filename = 'quickstatements/0008-7475.txt';

// Willdenowia JSTOR
$filename = 'quickstatements/0511-9618.txt';

// Stapfia
$filename = 'quickstatements/0252-192X.txt';

// Memoirs of The College of Science, University of Kyoto. Series B
$filename = 'quickstatements/0368-8895.txt';
$filename = 'quickstatements/0454-7802.txt';
$filename = 'quickstatements/kyoto.txt';
$filename = 'quickstatements/0369-206X.txt';

$filename = 'quickstatements/2095-8137.txt';

// Česká Mykologie
$filename = 'quickstatements/0009-0476.txt';

$filename = 'quickstatements/0021-5090.txt';

// Flora Malesiana Bulletin
$filename = 'quickstatements/0071-5778.txt';

// Taxonomic Report of The International Lepidoptera Survey
$filename = 'quickstatements/2643-4776.txt';

// Mitteilungen Des Naturwissenschaftlichen Vereins Für Steiermark
$filename = 'quickstatements/0369-1136.txt';

// Journal of Entomology and Zoology Studies
$filename = 'quickstatements/2320-7078.txt';

// Annales Historico-Naturales Musei Nationalis Hungarici
$filename = 'quickstatements/0521-4726.txt';

// Treubia
$filename = 'quickstatements/2337-876X.txt';

// ACTA BOTANICA YUNNANICA pre 1999
$filename = 'quickstatements/0253-2700.txt';

// Revista de la Sociedad Entomológica Argentina
$filename = 'quickstatements/1851-7471.txt';

// Knowia
$filename = 'quickstatements/knowia.txt';

// Pearce-Sellards Series Texas Memorial Museum
$filename = 'quickstatements/0079-0354.txt';

// Journal of Shenyang Normal University(Natural Science Edition)
$filename = 'quickstatements/1673-5862.txt';

// Mémoires du Musée Royal D'histoire Naturelle de Belgique
$filename = 'quickstatements/0770-7622.txt';

// Baltic Journal of Coleopterology
$filename = 'quickstatements/1407-8619.txt';

// Bulletin of The National Museum of Nature And Science Series A (Zoology) Supplement
$filename = 'quickstatements/1881-9052.txt';

//Memoirs of The Torrey Botanical Club
$filename = 'quickstatements/0097-3807.txt';

// Proceedings of The American Philosophical Society
$filename = 'quickstatements/0003-049X.txt';

// Proceedings of the American Academy of Arts and Sciences
$filename = 'quickstatements/0199-9818.txt';

// Proceedings of The Academy of Natural Sciences of Philadelphia
$filename = 'quickstatements/0097-3157.txt';

// Bulletin of The National Science Museum Series A (Zoology)
$filename = 'quickstatements/0385-2423.txt';

// Stuttgarter Beiträge Naturkunde Serie A [Biologie]
$filename = 'quickstatements/0341-0145.txt';

// Stuttgarter Beiträge Naturkunde
$filename = 'quickstatements/0562-4452.txt';

// Zoosystematica Rossica
$filename = 'quickstatements/2410-0226.txt';

$filename = 'quickstatements/Stettiner Entomologische Zeitung.txt';

$filename = 'quickstatements/Entomologische Zeitung Stettin.txt';

// Comunicaciones Zoológicas Del Museo de Historia Natural de Montevideo
$filename = 'quickstatements/0027-0113.txt';

$filename = 'quickstatements/2539-200X.txt';

// ACTA ENTOMOLOGICA SINICA
$filename = 'quickstatements/0454-6296.txt';

// Sendtnera
$filename = 'quickstatements/0944-0178.txt';

// Journal of The Entomological Society of Australia (N.s.w.)
$filename = 'quickstatements/0071-0725.txt';

// AnnotZoolJapon
$filename = 'quickstatements/AnnotZoolJapon.txt';

// orchid Monographs
$filename = 'quickstatements/0920-1998.txt';

// Acta Zoológica Lilloana
$filename = 'quickstatements/1852-6098.txt';

// Opera Botanica
$filename = 'quickstatements/0078-5237.txt';

// Israel Journal of Zoology
$filename = 'quickstatements/0021-2210.txt';

// Hydrobiologia with DOIs not getting metadata
//$filename = 'quickstatements/1573-5117.txt';

// Mitteilungen Der Schweizerischen Entomologischen Gesellschaft 
// = Bulletin de la Société Entomologique Suisse
// = Journal of The Swiss Entomological Society
$filename = 'quickstatements/0036-7575.txt';


$filename = 'quickstatements/0075-207X.txt';

// wuyi science journal
$filename = 'quickstatements/1001-4276.txt';

// Studies On The Fauna of Curaçao And Other Caribbean Islands
$filename = 'quickstatements/0166-5189.txt';

// Journal of the New York Entomological Society
$filename = 'quickstatements/0028-7199.txt';

// International Journal of Entomology
$filename = 'quickstatements/0735-6250.txt';

// Actualidades Biológicas
$filename = 'quickstatements/2145-7166.txt';

// Les Cahiers Magellanes new series
$filename = 'quickstatements/1625-2764.txt';

// Belgian Journal of Botany
$filename = 'quickstatements/0778-4031.txt';

// Botanische Jahrbücher Für Systematik, Pflanzengeschichte Und Pflanzengeographie
$filename = 'quickstatements/0006-8152.txt';

// Contributions From The Museum of Paleontology University of Michigan
$filename = 'quickstatements/0097-3556.txt';

// Amazonia
$filename = 'quickstatements/0065-6755.txt';

// Polish Journal of Botany
$filename = 'quickstatements/1641-8190.txt';

// Complex with multiple sources and languages
// Trudy Zoologicheskogo Instituta
// Proceedings of the Zoological Institute RAS
$filename = 'quickstatements/0206-0477.txt';


$filename = 'quickstatements/2080-945X.txt';

// Annales Zoologici
$filename = 'quickstatements/0003-4541.txt';

// Florida entomologist
$filename = 'quickstatements/0015-4040.txt';

// Entomologische Blätter Kafer
$filename = 'quickstatements/0013-8835.txt';

// Entomologische Blätter
$filename = 'quickstatements/0342-412X.txt';

// Jahrbücher Des Nassauischen Vereins Für Naturkunde
$filename = 'quickstatements/0368-1254.txt';

// Entomofauna
$filename = 'quickstatements/0250-4413.txt';

// Sugapa
$filename = 'quickstatements/1978-9807.txt';


// Chiroptera Neotropical
$filename = 'quickstatements/2317-6105.txt';


// Kontyu
// $filename = 'quickstatements/0013-8770.txt';

// Atalanta
//$filename = 'quickstatements/0171-0079.txt';

// Boletín Del Museo Nacional de Historia Natural, Chile
// different years have different ISSNs...
//$filename = 'quickstatements/0716-2545.txt';


//$filename = 'quickstatements/missed.txt';


// flags
$check = false;// don't check (only do this if we are sure we're adding new stuff)
$check = true; // make sure record doesn't alreday exist

$update = true; // Update any existing records
$update = false; // Leave existing record alone

$languages = array('en'); // assume everything is in English

//$languages = array('en', 'fr', 'de', 'pl');

// $languages = array('fr'); // assume everything is in French

//$languages = array('en', 'zh');

$languages = array('en', 'de');
$languages = array('en', 'pt');

//$languages = array('en', 'ru');

//$languages = array('en', 'de', 'ja');

//$languages = array('en', 'de', 'pt', 'es');

//$languages = array('en','de', 'fr', 'la');

//$languages = array('en', 'es');

//$languages = array('en', 'fr', 'de');

//$languages = array('en', 'id');

//$languages = array('en', 'fr', 'nl');

//$languages = array('en', 'hu', 'de', 'fr');

//$languages = array('cs', 'en', 'fr', 'de');

//$languages = array('hu', 'en', 'fr', 'de');


//$languages = array('ja','en','de');
//$languages = array('en', 'de', 'nl', 'fr');
//$languages = array('en', 'nl', 'de', 'fr');
//$languages = array('en', 'de');
//$languages = array('en', 'da', 'nl', 'fr');
//$languages = array('ja', 'en');


//$languages = array('en', 'zh', 'ja');
//$languages = array('en', 'zh');
//$languages = array('en', 'es', 'pt');
//$languages = array('en', 'fr', 'de', 'nl');


//$languages = array('de', 'en', 'fr', 'es');

//$languages = array('es', 'en', 'de', 'fr');

//$languages = array('pt');

//$languages = array('ru', 'en');

//$languages = array('de', 'en', 'fr');
//$languages = array('en', 'de');
//$languages = array('en', 'ru');

//$languages = array('en', 'zh');

//$languages = array('en', 'nl', 'de', 'fr');

//$languages = array('de', 'en', 'fr', 'es');

//$languages = array('es', 'en', 'de', 'pt');

//$languages = array('de', 'en', 'fr', 'la');

//$languages = array('es', 'en');

//$languages = array('en', 'ja', 'de');

//$languages = array('cs', 'en', 'de', 'la');

//$languages = array('en', 'pt');
//$languages = array('en', 'fr', 'de');


$count = 1;

$file_handle = fopen($filename, "r");
while (!feof($file_handle)) 
{
	// echo $guid . "\n";

	$guid = trim(fgets($file_handle));
	
	
	$url = 'http://localhost/~rpage/microcitation/www/citeproc-api.php?guid=' . urlencode($guid);

	//$url = 'http://localhost/~rpage/microcitation/www/citeproc-api.php?guid=' . urlencode($guid) . '&table=publications_tmp';


	$json = get($url);
	
	// echo $json;
	
	
	if ($json == '') {}
	else
	{
	

	$obj = json_decode($json);
	
	
	// For ACTA BOTANICA YUNNANICA pre 1999 we need to undo some things...
	if ($filename == 'quickstatements/0253-2700.txt')
	{
		// pagination is wrong
		unset($obj->page);
		unset($obj->{'page-first'});
		
		// make sure ISSN is for old journal
		$obj->ISSN = array('0253-2700'); 
	}

	//print_r($obj);
	
	//exit();
	
	// do we have this already? (now down in csljson_to_wikidata)
	$ok = true;
	
	
	/*
	$parts = array();
	
	if (isset($obj->ISSN))
	{
		$parts[] = $obj->ISSN[0];
	}
	if (isset($obj->volume))
	{
		$parts[] = $obj->volume;
	}
	if (isset($obj->page))
	{
		if (preg_match('/^(?<spage>\d+)(-\d+)?/', $obj->page, $m))
		{
			$parts[] = $m['spage'];
		}
	}
	
	//print_r($parts);
	
	if (count($parts == 3))
	{
		$item = wikidata_item_from_openurl($parts[0], $parts[1], $parts[2]);
		if ($item != '')
		{
			echo "*** Have already: $item ***\n";
			//$ok = false;
		}
		else
		{
			// echo "Not found\n";
		}
	}
	*/
	
	
	if ($ok)
	{
		$work = new stdclass;
		$work->message = $obj;

		//$quickstatements = csljson_to_wikidata($work, true, true, array('en', 'nl', 'de', 'fr'));
		
		$source = array();
		
		// default sources
		// JSTOR
		if (preg_match('/jstor.org\/stable\/(?<id>.*)$/', $guid, $m) || isset($obj->JSTOR))
		{
			$source[] = 'S248';
			$source[] = 'Q1420342';
			$source[] = 'S854';
			$source[] = '"https://www.jstor.org/stable/' . $obj->JSTOR . '"';
		}
		
		/*
		// JSTOR DOI carefull!!!?
		if (preg_match('/10.2307\/(?<id>.*)$/', $guid, $m))
		{
			$source[] = 'S248';
			$source[] = 'Q1420342';
			$source[] = 'S854';
			$source[] = '"https://www.jstor.org/stable/' . $m['id'] . '"';
		}	
		*/	

		// Persée (Q252430)
		if (preg_match('/10.3406\/jatba/', $guid, $m))
		{
			$source[] = 'S248';
			$source[] = 'Q252430';
			$source[] = 'S854';
			$source[] = '"' . $obj->URL . '"';
		}
		
		
		// www.persee.fr
		if (preg_match('/www.persee.fr/', $guid, $m))
		{
			$source[] = 'S248';
			$source[] = 'Q252430';
			$source[] = 'S854';
			$source[] = '"' . $obj->URL . '"';
		}
		
		// http://sfi-cybium.fr/ CYBIUM
		if (preg_match('/cybium/i', $guid, $m))
		{
			$source[] = 'S854';
			$source[] = '"' . preg_replace('/\x{A0}/u', '%C2%A0', $obj->URL) . '"';
		}
		
		
		// Senckenbergiana biologica
		if (isset($obj->ISSN))
		{
			if ($obj->ISSN[0] == '0037-2102')
			{
				$source[] = 'S854';
				$source[] = '"http://www.saturnia.de/senck-biol/sebio-cont.htm"';
			}
		}
				
		// www.zobodat.at
		if (preg_match('/www.zobodat.at/i', $guid, $m))
		{
			$source[] = 'S248';
			$source[] = 'Q55153845';
			$source[] = 'S854';
			$source[] = '"' . $obj->URL . '"';			
		}

		// repository.naturalis.nl
		if (preg_match('/repository.naturalis.nl/i', $guid, $m))
		{
			$source[] = 'S854';
			$source[] = '"' . $obj->URL . '"';			
		}
		
		if (isset($obj->ISSN))
		{
	
			if ($obj->ISSN[0] == '0034-365X')
			{
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';
			}
		}
		
		// 0304-0798
		// journals.co.za/
		// sabinet
		if (isset($obj->URL))
		{
			if (preg_match('/journals.co.za/i', $obj->URL, $m))
			{
				$source[] = 'S248';
				$source[] = 'Q30289518'; // Q52636404 is a redirect
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}
		
		// repositories.lib.utexas.edu
		if (isset($obj->ISSN))
		{
		
			if ($obj->ISSN[0] == '2325-4882')
			{
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';
			}
		}
		
		// fupress.net
		if (isset($obj->URL))
		{
			if (preg_match('/fupress.net/i', $obj->URL, $m))
			{
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}
		
		// www.sudoc.fr
		if (preg_match('/www.sudoc.fr/', $guid, $m))
		{
			$source[] = 'S248';
			$source[] = 'Q2597810';
			$source[] = 'S854';
			$source[] = '"' . $guid . '"';
		}
		
		// informit
		if (isset($obj->URL))
		{
			if (preg_match('/informit.com/i', $obj->URL, $m))
			{
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}		
		
		// elibrary.ru
		if (isset($obj->URL))
		{
			if (preg_match('/elibrary.ru/i', $obj->URL, $m))
			{
				$source[] = 'S248';
				$source[] = 'Q4037789';
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}		
		
		// http://www.anales.uchile.cl/index.php/ANUC/article/view/20509
		if (isset($obj->URL))
		{
			if (preg_match('/anales.uchile.cl/i', $obj->URL, $m))
			{
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}		

		// http://revista.sco.org.co
		if (isset($obj->URL))
		{
			if (preg_match('/http:\/\/revista.sco.org.co/i', $obj->URL, $m))
			{
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}		
		
		// i-scholar
		if (isset($obj->URL))
		{
			if (preg_match('/www.i-scholar.in/i', $obj->URL, $m))
			{
				$source[] = 'S248';
				$source[] = 'Q101048111';

				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}		
		
		// nelumbo
		if (isset($obj->URL))
		{
			if (preg_match('/nelumbo-bsi/i', $obj->URL, $m))
			{

				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}		
		
		
		// wanfangdata.com
		if (isset($obj->URL))
		{
			if (preg_match('/wanfangdata.com/i', $obj->URL, $m))
			{
				$source[] = 'S248';
				$source[] = 'Q21050270'; // Wanfang Data

				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}		

		/*
		// cinii
		if (isset($obj->CINII))
		{
			$source[] = 'S248';
			$source[] = 'Q10726338'; // Citation Information by NII (National Institute of Informatics)
			
			$source[] = 'S854';
			$source[] = '"https://ci.nii.ac.jp/naid/' . $obj->CINII . '"';			
		}		
		*/
		
		// rjh.folium.ru
		if (isset($obj->URL))
		{
			if (preg_match('/rjh.folium.ru/i', $obj->URL, $m))
			{
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}	
		
		// 		
		if (isset($obj->URL))
		{
			if (preg_match('/onlinelibrary.wiley.com/i', $obj->URL, $m))
			{
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}	
		
		// CAMJOL
		if (isset($obj->URL))
		{
			if (preg_match('/camjol.info/i', $obj->URL, $m))
			{
				$source[] = 'S248';
				$source[] = 'Q103847498'; // CAMJOL

				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}				
			
			
	
		// www.cybertruffle.org.uk
		if (isset($obj->URL))
		{
			if (preg_match('/(?<url>http:\/\/www.cybertruffle.org.uk\/cyberliber\/\d+\/\d+\/)/', $obj->URL, $m))
			{
				$source[] = 'S248';
				$source[] = 'Q104671608'; // CYBERLIBER
						
				$url = $m['url'] . 'index.htm';

				$source[] = 'S854';
				$source[] = '"' . $url . '"';			
			}
		}		
		
		// BanglaJOL
		if (isset($obj->URL))
		{
			if (preg_match('/banglajol.info/i', $obj->URL, $m))
			{
				$source[] = 'S248';
				$source[] = 'Q16826689'; // BanglaJOL

				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}	
		
		// MNHN
		if (isset($obj->URL))
		{
			if (preg_match('/sciencepress.mnhn.fr/i', $obj->URL, $m))
			{
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}							

		if (isset($obj->URL))
		{
			if (preg_match('/erepository.nara.ac.lk/i', $obj->URL, $m))
			{
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}	
		
		// mbimph.com						
		if (isset($obj->URL))
		{
			if (preg_match('/mbimph.com/i', $obj->URL, $m))
			{
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}	

		// fishtaxa
		if (isset($obj->URL))
		{
			if (preg_match('/fishtaxa.com/i', $obj->URL, $m))
			{
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}	
		
		// ijichthyol.org
		if (isset($obj->URL))
		{
			if (preg_match('/ijichthyol.org/i', $obj->URL, $m))
			{
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}	

		if (isset($obj->URL))
		{
			if (preg_match('/www.aemnp.eu/i', $obj->URL, $m))
			{
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}	
		
		// epa.oszk.hu
		if (isset($obj->link))
		{
			if (preg_match('/epa.oszk.hu/i', $obj->link[0]->URL, $m))
			{
				$source[] = 'S248';
				$source[] = 'Q988764'; // Elektronikus Periodika Archívum
				
				if (preg_match('/(?<url>http:\/\/epa.oszk.hu\/01600\/01635\/\d+\/pdf\/)/', $obj->link[0]->URL, $mm))
				{
					$source[] = 'S854';
					$source[] = '"' . $mm['url'] . '"';	
				}		
			}
		}	
		
		// journal.kib.ac.cn
		if (isset($obj->link))
		{
			if (preg_match('/journal.kib.ac.cn/i', $obj->link[0]->URL, $m))
			{
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}	
		
		// https://repository.kulib.kyoto-u.ac.jp/dspace/handle/2433/257937
		if (isset($obj->link))
		{
			if (preg_match('/repository.kulib.kyoto-u.ac.jp/i', $obj->link[0]->URL, $m))
			{
				$source[] = 'S248';
				$source[] = 'Q105759681'; // KURENAI
				
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';	
			}
		}	
		
		// www.entomoljournal.com
		if (isset($obj->link))
		{
			if (preg_match('/entomoljournal.com/i', $obj->link[0]->URL, $m))
			{
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}	
		
		if (preg_match('/10.11369\/jji/', $guid, $m))
		{
			$work->message->DOIAgency = 'jalc';
		}

		if (preg_match('/10.3969\/j.issn/', $guid, $m))
		{
			$work->message->DOIAgency = 'istic';
		}
		
		if (preg_match('/10.1023\/A/', $guid, $m))
		{
			$work->message->DOIAgency = 'crossref';
		}

		if (preg_match('/10.5169\/seals/', $guid, $m))
		{
			$work->message->DOIAgency = 'datacite';
		}

		if (preg_match('/10.6165\/tai/', $guid, $m))
		{
			$work->message->DOIAgency = 'airiti';
		}
		
		if (preg_match('/10.11369\/jji/', $guid, $m))
		{
			$work->message->DOIAgency = 'jalc';
		}
		
		
				
		// Tropicos
		if (preg_match('/legacy.tropicos.org/i', $guid, $m))
		{
			$source[] = 'S248';
			$source[] = 'Q2578548'; // Tropicos
					
			$source[] = 'S854';
			$source[] = '"' . $obj->URL . '"';		
			
			unset($obj->URL);
		}


		// e-periodica
		if (preg_match('/10.5169\/seals/i', $guid, $m))
		{
			$source[] = 'S248';
			$source[] = 'Q45313801'; // e-periodica
					
			$source[] = 'S854';
			$source[] = '"' . $obj->URL . '"';		
			
			unset($obj->URL);
		}
		
		// www.cnki.net
		if (isset( $obj->URL))
		{
			if (preg_match('/cnki.net/i', $obj->URL, $m))
			{
				$source[] = 'S248';
				$source[] = 'Q12857515'; // CNKI
					
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';		
			
			
			}
		}
	
	
		// bvs-vet.org.br
		if (preg_match('/bvs-vet.org.br/i', $guid, $m))
		{
			$source[] = 'S248';
			$source[] = 'Q108168159'; // Biblioteca Virtual em Medicina Veterinária e Zootecnia
					
			$source[] = 'S854';
			$source[] = '"' . $obj->URL . '"';		
			
			unset($obj->URL);
		}	
		
				
		
		// special
		if (0)
		{
			$urls = array (
			  1 => 'http://magellanes.net/book/volume-1-les-cahiers-magellanes-ns-n1/',
			  2 => 'http://magellanes.net/book/volume-2-les-cahiers-magellanes-ns-n2/',
			  3 => 'http://magellanes.net/book/volume-3-les-cahiers-magellanes-ns-n3/',
			  4 => 'http://magellanes.net/book/volume-4-les-cahiers-magellanes-ns-n4/',
			  5 => 'http://magellanes.net/book/volume-5-les-cahiers-magellanes-ns-n5/',
			  6 => 'http://magellanes.net/book/cm-6/',
			  7 => 'http://magellanes.net/book/cm-7/',
			  8 => 'http://magellanes.net/book/cm-8/',
			  9 => 'http://magellanes.net/book/cs-9/',
			  10 => 'http://magellanes.net/book/cs-10/',
			  11 => 'http://magellanes.net/book/cs-11/',
			  12 => 'http://magellanes.net/book/cm-12/',
			  13 => 'http://magellanes.net/book/cm-13/',
			  14 => 'http://magellanes.net/book/cm-14/',
			  15 => 'http://magellanes.net/book/cm-15/',
			  16 => 'http://magellanes.net/book/cm-16/',
			  17 => 'http://magellanes.net/book/cm-17/',
			  18 => 'http://magellanes.net/book/cm-18/',
			  19 => 'http://magellanes.net/book/cm-19/',
			  20 => 'http://magellanes.net/book/cm-20/',
			  21 => 'http://magellanes.net/book/cm-21/',
			  22 => 'http://magellanes.net/book/cm-22/',
			  23 => 'http://magellanes.net/book/cm-23/',
			  24 => 'http://magellanes.net/book/cm-24/',
			  25 => 'http://magellanes.net/book/cm-25/',
			  26 => 'http://magellanes.net/book/cm-26/',
			  27 => 'http://magellanes.net/book/cm-27/',
			  28 => 'http://magellanes.net/book/cm-28/',
			  29 => 'http://magellanes.net/book/cm-29/',
			  30 => 'http://magellanes.net/book/cm-30/',
			  31 => 'http://magellanes.net/book/cm-31/',
			  32 => 'http://magellanes.net/book/cm-32/',
			  33 => 'http://magellanes.net/book/cm-33/',
			  34 => 'http://magellanes.net/book/cm-34/',
			  35 => 'http://magellanes.net/book/cm-35/',
			  36 => 'http://magellanes.net/book/cm-36/',
			   37 => 'http://magellanes.net/book/1327-2/',
			  38 => 'http://magellanes.net/book/cm-38/',
			  39 => 'http://magellanes.net/book/cm-38-2/',
			);

			$url = $urls[$obj->volume];
		
				$source[] = 'S854';
				$source[] = '"' . $url . '"';				
		}
		
		
		// default
		if (1)
		{
			if (isset( $obj->URL) && (count($source) == 0))
			{
				$source[] = 'S854';
				$source[] = '"' . $obj->URL . '"';			
			}
		}
		
		
		if (0)
		{
			unset($obj->DOI);
			unset($obj->link);
		
		}
		
				
		
		$quickstatements = csljson_to_wikidata($work, 
			$check, 
			$update, 
			$languages,
			$source,
			true
			);
		
		if ($quickstatements != '')
		{
			echo $quickstatements . "\n\n";
		}
	}
	
	// Give server a break every 10 items
	if (($count++ % 10) == 0)
	{
		$rand = rand(1000000, 3000000);
		//echo "\n-- ...sleeping for " . round(($rand / 1000000),2) . ' seconds' . "\n\n";
		usleep($rand);
	}
	
	}


}

fclose($file_handle);

?>
